describe_log_groups
Lists AWS CloudWatch log groups and saved queries associated with them, optionally filtering by a name prefix. This tool retrieves information about log groups in the account, or log groups in accounts linked to this account as a monitoring account. If a prefix is provided, only log groups with names starting with the specified prefix are returned. Additionally returns any user saved queries that are associated with any of the returned log groups. Usage: Use this tool to discover log groups that you'd retrieve or query logs from and queries that have been saved by the user. Returns: -------- List of log group metadata dictionaries and saved queries associated with them Each log group metadata contains details such as: - logGroupName: The name of the log group. - creationTime: Timestamp when the log group was created - retentionInDays: Retention period, if set - storedBytes: The number of bytes stored. - kmsKeyId: KMS Key Id used for data encryption, if set - dataProtectionStatus: Displays whether this log group has a protection policy, or whether it had one in the past, if set - logGroupClass: Type of log group class - logGroupArn: The Amazon Resource Name (ARN) of the log group. This version of the ARN doesn't include a trailing :* after the log group name. Any saved queries that are applicable to the returned log groups are also included.
analyze_log_group
Analyzes a CloudWatch log group for anomalies, message patterns, and error patterns within a specified time window. This tool performs an analysis of the specified log group by: 1. Discovering and checking log anomaly detectors associated with the log group 2. Retrieving anomalies from those detectors that fall within the specified time range 3. Identifying the top 5 most common message patterns 4. Finding the top 5 patterns containing error-related terms Usage: Use this tool to detect anomalies and understand common patterns in your log data, particularly focusing on error patterns that might indicate issues. This can help identify potential problems and understand the typical behavior of your application. Returns: -------- A LogsAnalysisResult object containing: - log_anomaly_results: Information about anomaly detectors and their findings * anomaly_detectors: List of anomaly detectors for the log group * anomalies: List of anomalies that fall within the specified time range - top_patterns: Results of the query for most common message patterns - top_patterns_containing_errors: Results of the query for patterns containing error-related terms (error, exception, fail, timeout, fatal)
get_metric_data
Retrieves CloudWatch metric data for a specific metric. This tool retrieves metric data from CloudWatch for a specific metric identified by its namespace, metric name, and dimensions, within a specified time range. It can use either standard GetMetricData API or CloudWatch Metrics Insights for more advanced querying. The function automatically determines whether to use standard GetMetricData or Metrics Insights based on the parameters provided. If any Metrics Insights specific parameters are provided (group_by_dimension, schema_dimension_keys, limit, sort_order, or order_by_statistic), it will use Metrics Insights. When using group_by_dimension, you must include that dimension in schema_dimension_keys. Usage: Use this tool to get actual metric data from CloudWatch for analysis or visualization. Returns: GetMetricDataResponse: An object containing the metric data results Example 1 (Standard GetMetricData): result = await get_metric_data( ctx, namespace="AWS/EC2", metric_name="CPUUtilization", start_time="2023-01-01T00:00:00Z", dimensions=[ Dimension(name="InstanceId", value="i-1234567890abcdef0") ], statistic="Average" # Period will be auto-calculated based on time window and target_datapoints ) Example 2 (Metrics Insights with group by): result = await get_metric_data( ctx, namespace="AWS/EC2", metric_name="CPUUtilization", start_time="2023-01-01T00:00:00Z", end_time="2023-01-02T00:00:00Z", statistic="AVG", schema_dimension_keys=["InstanceType"], group_by_dimension="InstanceType" # This will generate a query like: SELECT AVG("CPUUtilization") FROM SCHEMA("AWS/EC2", "InstanceType") GROUP BY "InstanceType" ) Example 3 (Metrics Insights with schema dimension keys): result = await get_metric_data( ctx, namespace="AWS/EC2", metric_name="CPUUtilization", start_time="2023-01-01T00:00:00Z", end_time="2023-01-02T00:00:00Z", statistic="AVG", schema_dimension_keys=["InstanceId", "InstanceType"], group_by_dimension="InstanceId" # This will generate a query like: SELECT AVG("CPUUtilization") FROM SCHEMA("AWS/EC2", "InstanceId", "InstanceType") GROUP BY "InstanceId" ) Example 4 (Metrics Insights with ORDER BY and LIMIT to find the top 5 EC2 instances with the highest CPU utilization): result = await get_metric_data( ctx, namespace="AWS/EC2", metric_name="CPUUtilization", start_time="2023-01-01T00:00:00Z", end_time="2023-01-02T00:00:00Z", statistic="AVG", schema_dimension_keys=["InstanceId"], group_by_dimension="InstanceId", sort_order="DESC", limit=5, order_by_statistic="MAX" # This will generate a query like: SELECT AVG("CPUUtilization") FROM SCHEMA("AWS/EC2", "InstanceId") GROUP BY "InstanceId" ORDER BY MAX() DESC LIMIT 5 ) Example 5 (Metrics Insights with ORDER BY without sort direction to find the EC2 instances with the highest CPU utilization ordered by default ASC): result = await get_metric_data( ctx, namespace="AWS/EC2", metric_name="CPUUtilization", start_time="2023-01-01T00:00:00Z", end_time="2023-01-02T00:00:00Z", statistic="AVG", schema_dimension_keys=["InstanceId"], group_by_dimension="InstanceId", order_by_statistic="MAX" # This will generate a query like: SELECT AVG("CPUUtilization") FROM SCHEMA("AWS/EC2", "InstanceId") GROUP BY "InstanceId" ORDER BY MAX() ) Example 6 (Metrics Insights without ORDER BY clause to find the EC2 instances with the highest CPU utilization in no specific order): result = await get_metric_data( ctx, namespace="AWS/EC2", metric_name="CPUUtilization", start_time="2023-01-01T00:00:00Z", end_time="2023-01-02T00:00:00Z", statistic="AVG", schema_dimension_keys=["InstanceId"], group_by_dimension="InstanceId" # This will generate a query like: SELECT AVG("CPUUtilization") FROM SCHEMA("AWS/EC2", "InstanceId") GROUP BY "InstanceId" # No ORDER BY clause is added since neither order_by_statistic nor sort_order is specified ) For each result: for metric_result in result.metricDataResults: print(f"Metric: {metric_result.label}") for datapoint in metric_result.datapoints: print(f" {datapoint.timestamp}: {datapoint.value}")
get_metric_metadata
Gets metadata for a CloudWatch metric including description, unit and recommended statistics that can be used for metric data retrieval. This tool retrieves comprehensive metadata about a specific CloudWatch metric identified by its namespace and metric name. Usage: Use this tool to get detailed information about CloudWatch metrics, including their descriptions, units, and recommended statistics to use. Args: ctx: The MCP context object for error handling and logging. namespace: The metric namespace (e.g., "AWS/EC2", "AWS/Lambda") metric_name: The name of the metric (e.g., "CPUUtilization", "Duration") region: AWS region to query. Defaults to 'us-east-1'. Returns: Optional[MetricMetadata]: An object containing the metric's description, recommended statistics, and unit if found, None if no metadata is available. Example: result = await get_metric_metadata( ctx, namespace="AWS/EC2", metric_name="CPUUtilization" ) if result: print(f"Description: {result.description}") print(f"Unit: {result.unit}") print(f"Recommended Statistics: {result.recommendedStatistics}")
get_recommended_metric_alarms
Gets recommended alarms for a CloudWatch metric. This tool retrieves alarm recommendations for a specific CloudWatch metric identified by its namespace, metric name, and dimensions. The recommendations are filtered to match the provided dimensions. Usage: Use this tool to get recommended alarm configurations for CloudWatch metrics, including thresholds, evaluation periods, and other alarm settings. Args: ctx: The MCP context object for error handling and logging. namespace: The metric namespace (e.g., "AWS/EC2", "AWS/Lambda") metric_name: The name of the metric (e.g., "CPUUtilization", "Duration") dimensions: List of dimensions with name and value pairs region: AWS region to query. Defaults to 'us-east-1'. Returns: List[AlarmRecommendation]: A list of alarm recommendations that match the provided dimensions. Empty list if no recommendations are found or available. Example: recommendations = await get_recommended_metric_alarms( ctx, namespace="AWS/EC2", metric_name="StatusCheckFailed_Instance", dimensions=[ Dimension(name="InstanceId", value="i-1234567890abcdef0") ] ) for alarm in recommendations: print(f"Alarm: {alarm.alarmDescription}") print(f"Threshold: {alarm.threshold.staticValue}")
get_active_alarms
Gets all CloudWatch alarms currently in ALARM state. This tool retrieves all CloudWatch alarms that are currently in the ALARM state, including both metric alarms and composite alarms. Results are optimized for LLM reasoning with summary-level information. Usage: Use this tool to get an overview of all active alarms in your AWS account for troubleshooting, monitoring, and operational awareness. Args: ctx: The MCP context object for error handling and logging. max_items: Maximum number of alarms to return (default: 50). region: AWS region to query. Defaults to 'us-east-1'. Returns: ActiveAlarmsResponse: Response containing active alarms. Example: result = await get_active_alarms(ctx, max_items=25) if isinstance(result, ActiveAlarmsResponse): print(f"Found {len(result.metric_alarms + result.composite_alarms)} active alarms") for alarm in result.metric_alarms: print(f"Metric Alarm: {alarm.alarm_name}") for alarm in result.composite_alarms: print(f"Composite Alarm: {alarm.alarm_name}")
get_alarm_history
Gets the history for a CloudWatch alarm with time range suggestions for investigation. This tool retrieves the history for a specified CloudWatch alarm, focusing primarily on state transitions to ALARM state. It also provides suggested time ranges for investigation based on the alarm's configuration and history. Usage: Use this tool to understand when an alarm fired and get useful time ranges for investigating the underlying issue using other CloudWatch tools. The tool is particularly useful for identifying patterns like alarm flapping (going in and out of alarm state frequently). Args: ctx: The MCP context object for error handling and logging. region: AWS region to query. Defaults to 'us-east-1'. alarm_name: Name of the alarm to retrieve history for. start_time: Optional start time for the history query. Defaults to 24 hours ago. end_time: Optional end time for the history query. Defaults to current time. history_item_type: Optional type of history items to retrieve. Defaults to 'StateUpdate'. max_items: Maximum number of history items to return. Defaults to 50. include_component_alarms: For composite alarms, whether to include details about component alarms. Returns: Union[AlarmHistoryResponse, CompositeAlarmComponentResponse]: Either a response containing alarm history with time range suggestions, or component alarm details for composite alarms. Example: result = await get_alarm_history( ctx, alarm_name="my-cpu-alarm", start_time="2025-06-18T00:00:00Z", end_time="2025-06-19T00:00:00Z" ) if isinstance(result, AlarmHistoryResponse): print(f"Found {len(result.history_items)} history items") for suggestion in result.time_range_suggestions: print(f"Suggested investigation time range: {suggestion.start_time} to {suggestion.end_time}")
